@model BTNHOMTKW.Models.KhachHang
@{
    ViewBag.Title = "Chi tiết Khách hàng";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container mt-4">
    <h2 class="fw-bold mb-3">@Model.HoTen</h2>
    <hr />

    <div class="row">
        <div class="col-md-6">
            <h4 class="fw-bold mb-3">Thông tin tài khoản</h4>
            <dl class="row">
                <dt class="col-sm-4">Email</dt>
                <dd class="col-sm-8">@Model.TaiKhoanEmail</dd>

                <dt class="col-sm-4">Số điện thoại</dt>
                <dd class="col-sm-8">@Model.SDT</dd>

                <dt class="col-sm-4">Ngày sinh</dt>
                <dd class="col-sm-8">@(Model.NgaySinh.HasValue ? Model.NgaySinh.Value.ToString("dd/MM/yyyy") : "Chưa cập nhật")</dd>

                <dt class="col-sm-4">Ngày tạo</dt>
                <dd class="col-sm-8">@Model.TaiKhoan.NgayTao.ToString("dd/MM/yyyy")</dd>
            </dl>
        </div>
        <div class="col-md-6">
            <h4 class="fw-bold mb-3">Danh sách địa chỉ</h4>
            @if (Model.DiaChis.Any())
            {
                <ul class="list-group">
                    @foreach (var diaChi in Model.DiaChis)
                    {
                        <li class="list-group-item">
                            <strong>@diaChi.HoTenNhan - @diaChi.SDTNhan</strong>
                            @if (diaChi.MacDinh)
                            {
                                <span class="badge bg-primary">Mặc định</span>
                            }
                            <br />
                            <small>@diaChi.DiaChiChiTiet</small>
                        </li>
                    }
                </ul>
            }
            else
            {
                <p class="text-muted">Chưa có địa chỉ nào.</p>
            }
        </div>
    </div>

    <h4 class="fw-bold mt-4">Lịch sử mua hàng</h4>
    <table class="table table-bordered align-middle">
        <thead class="table-light">
            <tr>
                <th>Mã ĐH</th>
                <th>Ngày đặt</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var donHang in Model.DonHangs.OrderByDescending(d => d.NgayDat))
            {
                <tr>
                    <td>@donHang.MaDonHang</td>
                    <td>@donHang.NgayDat.ToString("dd/MM/yyyy")</td>
                    <td>@String.Format("{0:N0} VNĐ", donHang.ThanhTien)</td>
                    <td>@donHang.TrangThai</td>
                </tr>
            }
        </tbody>
    </table>

    <div class="mt-3">
        @Html.ActionLink("Quay lại danh sách", "Index", null, new { @class = "btn btn-secondary" })
    </div>
</div>
