@model BTNHOMTKW.Models.CheckoutViewModel
@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <style>
        /* Tùy chỉnh card */
        .cart-page .card {
            border-radius: 10px;
            overflow: hidden;
        }

            .cart-page .card:hover {
                transform: none !important;
                box-shadow: none !important;
            }

        .form-control, .form-select {
            border-radius: 8px;
        }

        .btn-lg {
            border-radius: 50px;
        }
    </style>
}

<div class="container py-5 cart-page">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb bg-transparent p-0">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")" class="text-muted">Trang chủ</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Cart")" class="text-muted">Giỏ hàng</a></li>
            <li class="breadcrumb-item active text-dark" aria-current="page">Thanh toán</li>
        </ol>
    </nav>

    <!-- Nội dung thanh toán -->
    <div class="card border-0 shadow-sm">
        <div class="card-header bg-dark text-white py-3">
            <h5 class="mb-0 fw-bold"><i class="fas fa-credit-card me-2"></i> Thông tin đặt hàng</h5>
        </div>
        <div class="card-body p-4">
            @using (Html.BeginForm("ProcessOrder", "Cart", FormMethod.Post))
            {
                <!-- Họ tên -->
                <div class="mb-3">
                    <label class="form-label fw-bold">Họ tên người nhận</label>
                    <input type="text" name="hoTen" class="form-control"
                           value="@(Model?.KhachHang?.HoTen)" required />
                </div>

                <!-- Số điện thoại -->
                <div class="mb-3">
                    <label class="form-label fw-bold">Số điện thoại</label>
                    <input type="text" name="sdt" class="form-control"
                           value="@(Model?.KhachHang?.SDT)" required />
                </div>

                <!-- Địa chỉ -->
                <div class="mb-3">
                    <label class="form-label fw-bold">Địa chỉ giao hàng</label>
                    <textarea name="diaChi" class="form-control" rows="3" required>
@(Model?.DefaultAddress?.DiaChiChiTiet ?? "")
</textarea>
                </div>

                <!-- Phương thức thanh toán -->
                <div class="mb-3">
                    <label class="form-label fw-bold">Phương thức thanh toán</label>
                    <select name="ptThanhToan" class="form-select">
                        <option value="COD">Thanh toán khi nhận hàng (COD)</option>
                        <option value="Banking">Chuyển khoản ngân hàng</option>
                    </select>
                </div>

                <hr class="my-4" />

                <!-- Tổng tiền -->
                <div class="d-flex justify-content-between mb-2">
                    <span class="text-muted">Tổng tiền hàng:</span>
                    <span class="fw-bold">@ViewBag.Total.ToString("#,##0") đ</span>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <span class="text-muted">Phí vận chuyển:</span>
                    <span class="fw-bold">30,000 đ</span>
                </div>

                <div class="d-flex justify-content-between mb-4">
                    <span class="fw-bold h5">Tổng cộng:</span>
                    <span class="fw-bold h4 text-danger">@((ViewBag.Total + 30000).ToString("#,##0")) đ</span>
                </div>

                <!-- Nút xác nhận -->
                <button type="submit" class="btn btn-dark btn-lg w-100 fw-bold py-3">
                    <i class="fas fa-check-circle me-2"></i> XÁC NHẬN ĐẶT HÀNG
                </button>
            }
        </div>
    </div>
</div>
